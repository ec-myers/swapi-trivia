(this["webpackJsonpswapi-trivia"]=this["webpackJsonpswapi-trivia"]||[]).push([[0],{24:function(e,t,a){e.exports=a(42)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(20),i=a.n(o),c=a(4),l=(a(29),a(23)),s=a(9),u=a(10),m=a(13),f=a(11),v=a(14),h=a(12);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E=function(e){return e.results.sort((function(e,t){return parseInt(e.release_date.slice(0,4))-parseInt(t.release_date.slice(0,4))})).map((function(e,t){return{title:e.title,scrollText:e.opening_crawl,id:t+1,episode:e.episode_id,releaseYear:e.release_date.slice(0,4)}}))},g=function(e){var t="https://swapi.co/api/films/".concat(e);return fetch(t).then((function(e){if(!e.ok)throw Error("Unable to fetch characters, click the movies tab and try again");return e.json()})).then((function(e){return e.characters})).then((function(e){return b(e)})).then((function(e){return C(e)})).then((function(e){return S(e)})).then((function(e){return O(e)}))},b=function(e){var t=e.map((function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return{name:e.name,homeworld:e.homeworld,species:e.species,films:e.films}}))}));return Promise.all(t)},C=function(e){var t=e.map((function(e){return 0===e.species.length?d({},e,{species:"Unknown"}):fetch(e.species).then((function(e){return e.json()})).then((function(t){return console.log(e.species),d({},e,{species:t.name})}))}));return Promise.all(t)},S=function(e){var t=e.map((function(e){return fetch(e.homeworld).then((function(e){return e.json()})).then((function(t){return d({},e,{homeworld:t.name,population:t.population})}))}));return Promise.all(t)},O=function(e){var t=e.map((function(e){var t=e.films.map((function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e.title}))}));return Promise.all(t).then((function(t){return d({},e,{films:t})}))}));return Promise.all(t)},w=a(6),y=(a(30),a(31),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){if(e.preventDefault(),a.state.name?a.setState({nameErr:!1}):a.setState({nameErr:!0}),a.state.quote?a.setState({quoteErr:!1}):a.setState({quoteErr:!0}),a.state.name&&a.state.quote){var t={name:a.state.name,quote:a.state.quote,rank:a.state.rank};a.props.getFormData(t),a.setState({isComplete:!0})}},a.state={name:"",quote:"",rank:"Padawan",nameErr:!1,quoteErr:!1,isComplete:!1},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){if(this.state.isComplete)return n.a.createElement(w.a,{to:"/movies"});var e=this.state,t=e.name,a=e.quote,r=e.rank,o=e.nameErr,i=e.quoteErr,c=o?"error":"",l=i?"error":"";return n.a.createElement("form",null,n.a.createElement("h1",null,"Star Wars Character Trivia!"),n.a.createElement("div",{className:"form-background"},n.a.createElement("label",{htmlFor:"name"},"Name"),n.a.createElement("input",{autoFocus:!0,value:t,id:"name",placeholder:"Enter a name",className:c,onChange:this.handleChange}),n.a.createElement("div",null,o&&n.a.createElement("p",null,"Please enter a name")),n.a.createElement("label",{htmlFor:"quote"},"Favorite Star Wars Quote"),n.a.createElement("input",{value:a,id:"quote",className:l,placeholder:"Enter your favorite Quote",onChange:this.handleChange}),n.a.createElement("div",null,i&&n.a.createElement("p",null,"Please enter a quote")),n.a.createElement("label",{htmlFor:"rank"},"Rank"),n.a.createElement("select",{value:r,onChange:this.handleChange,id:"rank"},n.a.createElement("option",{value:"Padawan",selected:!0},"Padawan"),n.a.createElement("option",{value:"Jedi Knight"},"Jedi Knight"),n.a.createElement("option",{value:"Jedi Master"},"Jedi Master")),n.a.createElement("button",{type:"button",onClick:this.handleSubmit},"May The Force Be With You")))}}]),t}(r.Component)),k=(a(37),function(e){var t=e.movie,a=e.goToMovieCharacters;return n.a.createElement("div",{className:"Movie-Card"},n.a.createElement("h2",null,t.title),n.a.createElement("h3",null,"Episode: ",t.episode),n.a.createElement("h3",null,"Released in ",t.releaseYear),n.a.createElement(c.b,{onClick:a,to:"/movies/".concat(t.id)},n.a.createElement("button",{id:t.id},"Explore Characters")))}),F=(a(38),function(e){var t=e.character,a=e.toggleFavorite,r=e.favorites,o=t.name,i=t.homeworld,c=t.population,l=t.species,s=t.films,u=r.map((function(e){return e.name})).includes(o)?"favorite":"",m=u?"Remove Favorite":"Add Favorite",f=s.map((function(e){return n.a.createElement("li",null,e)}));return n.a.createElement("div",{className:"Character-Card ".concat(u)},n.a.createElement("h2",null,o),n.a.createElement("h3",null,"Homeworld: ",i),n.a.createElement("h3",null,"Population: ",c),n.a.createElement("h3",null,"Species: ",l),n.a.createElement("ul",null,"Films: ",f),n.a.createElement("div",{className:"div-favorite"},n.a.createElement("button",{id:o,onClick:function(){a(t)}},m," (",r.length,")")))}),j=(a(39),function(e){var t=e.cards,a=e.goToMovieCharacters,r=e.toggleFavorite,o=e.favorites,i=e.type;if("favorites"===i&&0===o.length)return n.a.createElement("div",{className:"empty-favorites"},n.a.createElement("h3",null,"Add some favorites!"),n.a.createElement("p",null,"Head back to the 'Movies' Tab"));var c=t;"characters"===i&&(c=t.slice(0,10));var l=c.map((function(e){return e.title?n.a.createElement(k,{key:e.episode,movie:e,goToMovieCharacters:a}):n.a.createElement(F,{key:e.name,character:e,toggleFavorite:r,favorites:o})}));return n.a.createElement("section",{className:"Container"},l)}),N=(a(40),function(e){var t=e.user,a=e.logOut;return n.a.createElement("nav",null,n.a.createElement("div",{className:"user-container"},n.a.createElement("div",{className:"inner"},n.a.createElement("span",null,"i"),n.a.createElement("p",null,"Name: ",t.name),n.a.createElement("p",null,"Quote: ",t.quote),n.a.createElement("p",null,"Rank: ",t.rank))),n.a.createElement(c.c,{to:"/movies",className:"nav-link",activeStyle:{color:"coral"}},"Movies"),n.a.createElement(c.c,{to:"/favorites",className:"nav-link",activeStyle:{color:"coral"}},"Favorites"),n.a.createElement(c.b,{onClick:a,to:"/"},n.a.createElement("button",null,"Logout")))}),M=(a(41),function(e){var t=e.selectedMovie,a=t.title,r=t.scrollText,o=t.episode;return n.a.createElement("div",{className:"scroll"},n.a.createElement("div",{className:"fade"}),n.a.createElement("section",{className:"star-wars"},n.a.createElement("div",{className:"crawl"},n.a.createElement("div",{className:"title"},n.a.createElement("p",null,"Episode ",o),n.a.createElement("h1",null,a)),n.a.createElement("p",null,r))))}),I=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(f.a)(t).call(this))).goToMovieCharacters=function(t){var a=parseInt(t.target.id),r=e.state.movies[a-1];e.setState({selectedMovie:r,haveCharacters:!1,characters:[]}),g(a).then((function(t){return e.setState({characters:t,haveCharacters:!0})}))},e.getFormData=function(t){e.setState({userInfo:t,isFormComplete:!0}),localStorage.setItem("userInfo",JSON.stringify(t))},e.toggleFavorite=function(t){e.state.favorites.map((function(e){return e.name})).includes(t.name)?e.removeFavorite(t):e.addFavorite(t)},e.addFavorite=function(t){var a=e.state.favorites,r=[].concat(Object(l.a)(a),[t]);e.setState({favorites:r}),localStorage.setItem("favorites",JSON.stringify(r))},e.removeFavorite=function(t){var a=e.state.favorites.filter((function(e){return e.name!==t.name}));e.setState({favorites:a}),localStorage.setItem("favorites",JSON.stringify(a))},e.logOut=function(){localStorage.clear(),e.setState({isFormComplete:!1,userInfo:{}})},e.state={userInfo:{},movies:[],characters:[],selectedMovie:{},haveMovies:!1,haveCharacters:!0,isFormComplete:!1,favorites:[],error:""},e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(fetch("https://swapi.co/api/films").then((function(e){if(!e.ok)throw Error("Could not fetch films, please refresh the page and try again");return e.json()})).then((function(e){return E(e)})).then((function(t){return e.setState({movies:t,haveMovies:!0})})).catch((function(t){return e.setState({error:t})})),localStorage.getItem("favorites")){var t=JSON.parse(localStorage.getItem("favorites"));this.setState({favorites:t})}if(localStorage.getItem("userInfo")){var a=JSON.parse(localStorage.getItem("userInfo"));this.setState({userInfo:a,isFormComplete:!0})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.movies,r=t.characters,o=t.isFormComplete,i=t.userInfo,c=t.haveCharacters,l=t.selectedMovie,s=t.haveMovies,u=t.favorites,m=t.error;return n.a.createElement("main",{className:"App"},n.a.createElement(w.b,{exact:!0,path:"/",render:function(){return n.a.createElement(y,{getFormData:e.getFormData})}}),o&&n.a.createElement(N,{logOut:this.logOut,user:i}),!s&&n.a.createElement("div",{className:"loading-img"}),m&&n.a.createElement("div",{className:"error-div"},m),n.a.createElement(w.b,{exact:!0,path:"/movies",render:function(){return n.a.createElement(j,{cards:a,goToMovieCharacters:e.goToMovieCharacters})}}),c&&n.a.createElement(w.b,{exact:!0,path:"/movies/:id",render:function(){return n.a.createElement(j,{type:"characters",cards:r,toggleFavorite:e.toggleFavorite,favorites:u})}}),n.a.createElement(w.b,{exact:!0,path:"/favorites",render:function(){return n.a.createElement(j,{type:"favorites",cards:u,favorites:u,toggleFavorite:e.toggleFavorite})}}),s&&!c&&n.a.createElement(M,{selectedMovie:l}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=n.a.createElement(c.a,null,n.a.createElement(I,null));i.a.render(P,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.5fbddc3b.chunk.js.map